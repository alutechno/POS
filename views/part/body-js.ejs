<!-- AdminLTE -->
<script src="/tmpl/plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="/tmpl/bootstrap/js/bootstrap.min.js"></script>
<script src="/tmpl/plugins/iCheck/icheck.min.js"></script>
<script src="/tmpl/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<script src="/tmpl/plugins/fastclick/fastclick.js"></script>
<script src="/tmpl/dist/js/app.min.js"></script>
<script src="/tmpl/dist/js/demo.js"></script>
<script src="/vendor/bootstrap-table/dist/bootstrap-table.min.js"></script>
<!-- Virtual keyboard -->
<script src="/vendor/vkeyboard/docs/js/jquery-ui.min.js"></script>
<script src="/vendor/vkeyboard/js/jquery.keyboard.js"></script>
<script src="/vendor/vkeyboard/js/jquery.keyboard.extension-all.js"></script>
<!-- Personal -->
<script>
    App.getRole();
    App.virtualKeyboard = function () {
        var getOpts = function (obj, isFloat) {
            var opts = {
                autoAccept: true,
                autoAcceptOnEsc:true,
                initialFocus:true,
                lockInput:true, //dont force disabled keyboard
                noFocus:true //force focus input!
            };
			opts.change = function (ev, keyboard, el) {
				var val = $(keyboard.preview).val();
			    if (obj.layout == 'numpad') {
                    if (isFloat) {
                        $(el).data('value', parseFloat(val));
                        $(el).data('display', rupiahJS(val));
                        $(el).val(rupiahJS(val))
                    } else {
                        $(el).data('value', val);
                        $(el).data('display', val);
                        $(el).val(val)
					}
				} else {
                    $(el).val(val);
                }
                $(el).trigger('change');
            }
            return Object.assign(opts, obj);
        }
        var text = $('input[type="text"]');
        var textarea = $('textarea');
        var currency = $('input[type="currency"]');
        var number = $('input[type="number"]');
        var password = $('input[type="password"]');
        currency.keyboard(getOpts({layout: 'numpad'}, 1));
        currency.css('text-align', 'end');
        currency.on('focus', function(){
            let v = $(this).val();
            if (!v || v == "0.00") {
                $(this).val('')
			} else {
                $(this).val(
                    parseFloat(v.replace(/\,/g, ""))
                	.toFixed(0).toString()
                	.replace(/\B(?=(\d{3})+(?!\d))/g, ",")
				)
			}
		})
        currency.on('change', function (e) {
            var el = $(this);
            var val = el.val() || "0";
            el.data('value', parseFloat(val.replace(/\,/g, "")).toFixed(2));
            el.data('display',
                parseFloat(val.replace(/\,/g, ""))
                .toFixed(2).toString()
                .replace(/\B(?=(\d{3})+(?!\d))/g, ",")
            );
            el.attr('value', el.data('display'));
            el.val(el.data('display'));
        });
        password.keyboard(getOpts({layout: 'qwerty'}));
        number.keyboard(getOpts({layout: 'numpad'}));
        text.keyboard(getOpts({layout: 'qwerty'}));
        textarea.keyboard(getOpts({layout: 'qwerty'}));
	}
</script>